(this["webpackJsonphomeowner-app"]=this["webpackJsonphomeowner-app"]||[]).push([[0],{439:function(e,t,n){},440:function(e,t,n){},441:function(e,t,n){},448:function(e,t,n){},691:function(e,t){},693:function(e,t){},704:function(e,t){},706:function(e,t){},733:function(e,t){},735:function(e,t){},736:function(e,t){},741:function(e,t){},743:function(e,t){},762:function(e,t){},774:function(e,t){},777:function(e,t){},834:function(e,t,n){},835:function(e,t,n){},836:function(e,t,n){},837:function(e,t,n){},838:function(e,t,n){},839:function(e,t,n){},840:function(e,t,n){},841:function(e,t,n){},947:function(e,t,n){},950:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(100),s=n.n(c),i=(n(438),n(439),n(7)),o=n(211),l=n(18),u=(n(440),n(952)),j=n(963),d=n(962),b=Object(a.createContext)(null),h=(n(441),n(422)),m=n(210),p=n(67),O=n(423),x=n(2);function f(e){var t=e.onLogout,n=Object(a.useContext)(b);return Object(x.jsx)(u.a,{children:Object(x.jsxs)(j.a,{collapseOnSelect:!0,fixed:"top",bg:"light",expand:"lg",className:"c-homeowner-navbar",children:[Object(x.jsx)(j.a.Brand,{href:"#/",children:Object(x.jsx)(h.a,{})}),Object(x.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(d.a,{className:"mr-auto",children:[n&&1===n.role?Object(x.jsxs)(d.a.Link,{href:"#/tenants",children:["Tenants",Object(x.jsx)(p.f,{})]}):null,n?Object(x.jsxs)(d.a.Link,{href:"#/messages",children:["Messages",Object(x.jsx)(O.a,{})]}):null,n?Object(x.jsxs)(d.a.Link,{href:"#/voting",children:["Voting",Object(x.jsx)(m.b,{})]}):null]}),Object(x.jsxs)(d.a,{className:"ml-auto",children:[n?null:Object(x.jsxs)(d.a.Link,{href:"#/signup",children:["Signup",Object(x.jsx)(p.a,{})]}),n?Object(x.jsxs)(d.a.Link,{eventKey:"disabled",disabled:!0,children:["Welcome"," ".concat(n.fullName?n.fullName.split(" ")[0]:""),Object(x.jsx)(m.a,{})," "]}):null,n?Object(x.jsxs)(d.a.Link,{href:"#",onClick:function(){return t()},children:["Logout",Object(x.jsx)(p.c,{})]}):null]})]})]})})}function g(){return Object(a.useContext)(b)?Object(x.jsx)("div",{children:"Dashboard"}):Object(x.jsx)(l.a,{to:"/"})}var v=n(6),y=n.n(v),w=n(15),C=(n(448),n.p+"static/media/background-image.eb8723f6.jpg"),N=n(953),k=n(965),S=n.p+"static/media/messages-icon.eb9fecda.png",U=n.p+"static/media/tenants-icon.64b5bfa4.png",T=n.p+"static/media/voting-icon.14692da9.png",B=n.p+"static/media/issues-icon.55281240.png";function D(){return Object(x.jsxs)(N.a,{children:[Object(x.jsxs)(k.a,{className:"col-md-6 col-lg-3",children:[Object(x.jsx)(k.a.Img,{variant:"top",src:U}),Object(x.jsx)(k.a.Title,{children:"Managing building members"}),Object(x.jsx)(k.a.Text,{children:"You as a committee owner can add or remove tenants from the building account."})]}),Object(x.jsxs)(k.a,{className:"col-md-6 col-lg-3",children:[Object(x.jsx)(k.a.Img,{variant:"top",src:S}),Object(x.jsx)(k.a.Title,{children:"Manage messages system"}),Object(x.jsx)(k.a.Text,{children:"You as a committee owner can post messages to all building tenants. Also can delete/update posted message if needed. A tenant can view, filter and search messages."})]}),Object(x.jsxs)(k.a,{className:"col-md-6 col-lg-3",children:[Object(x.jsx)(k.a.Img,{variant:"top",src:T}),Object(x.jsx)(k.a.Title,{children:"Manage voting system"}),Object(x.jsx)(k.a.Text,{children:"You as a committee owner can create a new voting, updating the information of the vote and observe the voting on-going progress. A building member can view all active voting and participate in desicion."})]}),Object(x.jsxs)(k.a,{className:"col-md-6 col-lg-3",children:[Object(x.jsx)(k.a.Img,{variant:"top",src:B}),Object(x.jsx)(k.a.Title,{children:"Manage building issues"}),Object(x.jsx)(k.a.Text,{children:"You as a building member can report issues with priority, have the ability to view and update/delete/close the issue created by you. As a committee member you can view all issues and comment then if needed."})]})]})}var L=n(954),I=n(961),M=n(955),A=n(16),E=n.n(A),P=n(10),F=function e(t){Object(P.a)(this,e),this.id=t.id,this.name=t.get("name"),this.street=t.get("street"),this.city=t.get("city"),this.parseCommunity=t},V=n(425),G=n(426),H=Object(G.a)("parseUser"),Q=function e(t){Object(P.a)(this,e),Object.defineProperty(this,H,{writable:!0,value:void 0}),this.id=t.id,this.fullName=t.get("fullName"),this.userName=t.get("username"),this.email=t.get("username"),this.role=t.get("role"),this.community=t.get("community"),this.apartment=t.get("apartment"),this.pwd=t.password,t.get("image")&&(this.img=t.get("image").url()),Object(V.a)(this,H)[H]=t};Q.activeUser=null;var R=n.p+"static/media/person.8aa599f8.png",Y=function e(t){Object(P.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.priority=t.get("priority"),this.community=t.get("community"),t.get("comments")&&(this.comments=t.get("comments")),this.createdBy=t.get("createdBy"),t.get("image")&&(this.img=t.get("image").url()),this.createDate=t.get("createdAt"),this.readBy=t.get("readBy")},q=function e(t){Object(P.a)(this,e),this.id=t.id,this.createdBy=t.get("createdBy"),this.createDate=t.get("createdAt"),this.title=t.get("title"),this.details=t.get("details"),this.options=t.get("options"),this.dueDate=t.get("dueDate"),this.votes=t.get("votes"),this.community=t.get("community")};function z(){return(z=Object(w.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=7;break}return e.next=3,E.a.User.logIn(t,n);case 3:a=e.sent,Q.activeUser=new Q(a),e.next=9;break;case 7:Q.activeUser=null,console.error("cannot login - missing credentials");case 9:return e.abrupt("return",Q.activeUser);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(w.a)(y.a.mark((function e(t,n,a,r,c,s,i,o){var l,u,j,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(r,c,i);case 2:return l=e.sent,(u=new E.a.User).set("username",n),u.set("email",n),u.set("fullName",t),u.set("password",a),u.set("apartment",s),o?u.set("image",new E.a.File(o.name,o)):u.set("image",{image:R}),u.set("role",1),u.set("community",l.parseCommunity),e.prev=12,e.next=15,u.signUp();case 15:return j=e.sent,Q.activeUser=new Q(j),e.abrupt("return",Q.activeUser);case 20:throw e.prev=20,e.t0=e.catch(12),(d=new E.a.Query("Community")).equalTo("objectId",l.parseCommunity.id),d.find().then((function(e){return E.a.Object.destroyAll(e)})),e.t0;case 26:case"end":return e.stop()}}),e,null,[[12,20]])})))).apply(this,arguments)}function W(e,t,n){return J.apply(this,arguments)}function J(){return(J=Object(w.a)(y.a.mark((function e(t,n,a){var r,c,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.a.Object.extend("Community"),(c=new r).set("name",t),c.set("street",n),c.set("city",a),e.next=7,c.save();case 7:return s=e.sent,i=new F(s),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(w.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new E.a.Query("User")).equalTo("community",t),e.next=4,n.find();case 4:return a=e.sent,r=a.map((function(e){return new Q(e)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(w.a)(y.a.mark((function e(t,n,a,r,c,s){var i,o,l,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new E.a.User).set("username",n),i.set("email",n),i.set("fullName",t),i.set("password",a),s&&i.set("image",new E.a.File(s.name,s)),i.set("apartment",c),i.set("role",2),i.set("community",r),(o=new E.a.ACL).setPublicWriteAccess(!0),o.setPublicReadAccess(!0),i.setACL(o),l=E.a.User.current().get("sessionToken"),e.next=16,i.signUp();case 16:return u=e.sent,E.a.User.become(l),e.abrupt("return",new Q(u));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(w.a)(y.a.mark((function e(t,n,a,r,c){var s,i,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=E.a.User.current().get("sessionToken"),i=new E.a.Query("User"),e.next=4,i.get(t.id);case 4:return(o=e.sent).set("username",a||t.email),o.set("email",a||t.email),o.set("fullName",n||t.fullName),o.set("apartment",r||t.apartment),"object"===typeof c&&o.set("image",new E.a.File(c.name,c)),e.next=12,o.save();case 12:return l=e.sent,E.a.User.become(s),e.abrupt("return",new Q(l));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new E.a.Query("User"),e.next=3,n.get(t.id);case 3:e.sent.destroy().then((function(e){return console.log("Deleted user",e),new Q(e)}),(function(e){throw console.error("Error while deleting user",e),e}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(w.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new E.a.Query("Message")).equalTo("community",t),e.next=4,n.find();case 4:return a=e.sent,r=a.map((function(e){return new Y(e)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(w.a)(y.a.mark((function e(t,n,a,r){var c,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=E.a.Object.extend("Message"),(s=new c).set("createdBy",E.a.User.current()),s.set("title",t),s.set("details",n),s.set("priority",a),r&&s.set("image",new E.a.File(r.name,r)),s.set("community",Q.activeUser.community),s.set("readBy",[E.a.User.current().id]),e.next=11,s.save();case 11:return i=e.sent,e.abrupt("return",new Y(i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(w.a)(y.a.mark((function e(t,n){var a,r,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E.a.Query("Message"),e.next=3,a.get(t.id);case 3:return r=e.sent,c=[],t.comments&&t.comments.length>0?(c=c.concat(t.comments)).push(n):c.push(n),r.set("comments",c),e.next=9,r.save();case 9:return s=e.sent,e.abrupt("return",new Y(s));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(w.a)(y.a.mark((function e(t,n,a,r,c){var s,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new E.a.Query("Message"),e.next=3,s.get(t.id);case 3:return(i=e.sent).set("title",n),i.set("details",a),i.set("priority",r),"object"===typeof c&&i.set("image",new E.a.File(c.name,c)),e.next=10,i.save();case 10:return o=e.sent,e.abrupt("return",new Y(o));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new E.a.Query("Message"),e.next=3,n.get(t.id);case 3:e.sent.destroy().then((function(e){console.log("Deleted user",e)}),(function(e){throw console.error("Error while deleting user",e),e}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(w.a)(y.a.mark((function e(t,n){var a,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E.a.Query("Message"),e.next=3,a.get(t.id);case 3:return r=e.sent,t&&t.readBy?r.set("readBy",t.readBy.concat(n)):r.set("readBy",[n]),e.next=7,r.save();case 7:return c=e.sent,e.abrupt("return",new Y(c));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(w.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new E.a.Query("Voting")).equalTo("community",t),e.next=4,n.find();case 4:return a=e.sent,r=a.map((function(e){return new q(e)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(w.a)(y.a.mark((function e(t,n,a,r){var c,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=E.a.Object.extend("Voting"),(s=new c).set("createdBy",E.a.User.current()),s.set("title",t),s.set("details",n),s.set("options",a),s.set("dueDate",r),s.set("community",Q.activeUser.community),e.next=10,s.save();case 10:return i=e.sent,e.abrupt("return",new q(i));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(w.a)(y.a.mark((function e(t,n){var a,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E.a.Query("Voting"),e.next=3,a.get(t.id);case 3:return(r=e.sent).set("dueDate",n),e.next=7,r.save();case 7:return c=e.sent,e.abrupt("return",new q(c));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(w.a)(y.a.mark((function e(t,n){var a,r,c,s,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E.a.Query("Voting"),e.next=3,a.get(t.id);case 3:return r=e.sent,(c=r.get("votes"))&&c.length>0?((s=c.findIndex((function(e){return e.user.id===n.user.id})))>=0?c.splice(s,1,n):c.push(n),r.set("votes",c)):((i=[]).push(n),r.set("votes",i)),e.next=8,r.save();case 8:return o=e.sent,e.abrupt("return",new q(o));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(w.a)(y.a.mark((function e(t){var n,a,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new E.a.Query("Community")).equalTo("objectId",t.id),e.next=4,n.find();case 4:return a=e.sent,(r=new E.a.Query("User")).equalTo("community",a[0]),e.next=9,r.find();case 9:return c=e.sent,e.abrupt("return",c.map((function(e){return new Q(e)})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new E.a.Query("Community")).equalTo("objectId",t.id),e.next=4,n.find();case 4:return a=e.sent,e.abrupt("return",a[0].get("name"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de={login:function(e,t){return z.apply(this,arguments)},signup:function(e,t,n,a,r,c,s,i){return K.apply(this,arguments)},getAllCommunityTenants:function(e){return X.apply(this,arguments)},loadActiveUser:function(){return Q.activeUser=E.a.User.current()?new Q(E.a.User.current()):null},addTenant:function(e,t,n,a,r,c){return Z.apply(this,arguments)},updateTenant:function(e,t,n,a,r){return $.apply(this,arguments)},deleteTenant:function(e){return _.apply(this,arguments)},getAllCommunityMessages:function(e){return ee.apply(this,arguments)},addNewMessage:function(e,t,n,a){return te.apply(this,arguments)},addNewComment:function(e,t){return ne.apply(this,arguments)},updateMessage:function(e,t,n,a,r){return ae.apply(this,arguments)},deleteMessage:function(e){return re.apply(this,arguments)},addUserReadMessage:function(e,t){return ce.apply(this,arguments)},getAllCommunityVoting:function(e){return se.apply(this,arguments)},addVoting:function(e,t,n,a){return ie.apply(this,arguments)},changeVotingDate:function(e,t){return oe.apply(this,arguments)},addUserVoting:function(e,t){return le.apply(this,arguments)},getCommunityUsers:function(e){return ue.apply(this,arguments)},getCommunityName:function(e){return je.apply(this,arguments)}};function be(e){var t=e.onLogin,n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],s=r[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],h=j[1],m=Object(a.useState)(""),O=Object(i.a)(m,2),f=O[0],g=O[1],v=Object(a.useContext)(b);function N(){return(N=Object(w.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=null,e.prev=2,e.next=5,de.login(d,f);case 5:a=e.sent,t(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while logging in user",e.t0),s(!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return Object(x.jsxs)(u.a,{fluid:!0,className:"p-home",children:[Object(x.jsxs)("div",{className:"p-home-header",children:[Object(x.jsxs)("div",{className:v?"p-home-title col-12":"p-home-title col-sm-6 col-md-8",children:[Object(x.jsx)("h1",{className:"display-4",children:"Homeowner Association Management System"}),Object(x.jsx)("h3",{children:"All you need to handle your building "})]}),v?null:Object(x.jsxs)("div",{className:"p-login col-md-3",children:[Object(x.jsx)("h4",{children:"Login to Your Building"}),Object(x.jsxs)("p",{children:["or ",Object(x.jsx)(o.b,{to:"/signup",children:"create a new committee"})]}),c?Object(x.jsx)(L.a,{variant:"danger",children:"Invalid Credentials!"}):null,Object(x.jsxs)(I.a,{onSubmit:function(e){return N.apply(this,arguments)},className:"mb-3",children:[Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(x.jsx)(I.a.Control,{type:"email",placeholder:"Enter email address",value:d,onChange:function(e){return h(e.target.value)}}),Object(x.jsx)(I.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(x.jsx)(I.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(x.jsx)(I.a.Control,{type:"password",placeholder:"Password",value:f,onChange:function(e){return g(e.target.value)}})}),Object(x.jsxs)(M.a,{className:"mb-3",variant:"primary",type:"submit",block:!0,children:["Login ",Object(x.jsx)(p.b,{})]})]})]})]}),Object(x.jsx)("div",{className:"p-home-bg-img",children:Object(x.jsx)("img",{className:"p-home-img",src:C,alt:"Landing page img"})}),Object(x.jsx)("div",{className:"p-home-footer",children:Object(x.jsx)(D,{})})]})}var he=n(959),me=n(964),pe=n(956),Oe=n(427);n(834);function xe(e){var t=e.placeholder,n=e.filterSelection,a=e.sortBy,r=e.onSortChange,c=e.onFilterChange,s=e.onFilterSelectChange,i=e.action,o=e.showModal,l="",u="";return n&&(l=n.map((function(e){return Object(x.jsx)("option",{children:e})}))),a&&(u=a.map((function(e){return Object(x.jsx)(I.a.Check,{inline:!0,type:"radio",name:"sorting",label:e,value:e,onChange:function(e){return r(e.target.value)}})}))),Object(x.jsxs)(I.a,{className:"c-page-header",children:[Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(Oe.a,{children:t?Object(x.jsx)(I.a.Control,{type:"text",placeholder:t,onChange:function(e){return c(e.target.value)}}):null}),n?Object(x.jsx)(Oe.a,{md:3,lg:2,children:Object(x.jsx)(I.a.Control,{as:"select",custom:!0,size:"sm",onChange:function(e){return s(e.target.value)},children:l})}):null,u?Object(x.jsxs)(Oe.a,{className:"c-header-sort",md:5,lg:4,children:[Object(x.jsx)(I.a.Label,{children:"Sort by: "}),u]}):null]}),Object(x.jsx)(pe.a,{children:Object(x.jsx)(Oe.a,{className:"c-b-end",children:i?Object(x.jsx)(M.a,{variant:"primary",onClick:o,children:i}):null})})]})}var fe=n(957);n(835);function ge(e){var t=e.tenant,n=e.index,a=e.onUpdateTenant,r=e.onDeleteTenant;return Object(x.jsxs)(k.a,{className:"c-tenant",children:[Object(x.jsx)(k.a.Header,{children:Object(x.jsx)(me.a.Toggle,{as:M.a,variant:"link",eventKey:n,children:Object(x.jsxs)("h5",{children:[t.fullName,1===t.role?", Admin":null]})})}),Object(x.jsx)(me.a.Collapse,{eventKey:n,children:Object(x.jsxs)("div",{className:"c-tenant-info",children:[Object(x.jsx)("div",{className:"c-tenant-img",children:Object(x.jsx)(k.a.Img,{variant:"top",src:t.img})}),Object(x.jsxs)(k.a.Body,{children:[Object(x.jsxs)(k.a.Title,{children:["Name: ",t.fullName]}),Object(x.jsxs)(k.a.Text,{children:["Email: ",t.email]}),Object(x.jsxs)(k.a.Text,{children:["Apt: ",t.apartment]})]}),Object(x.jsx)("div",{className:"c-tenant-button",children:Object(x.jsxs)(fe.a,{className:"mr-2","aria-label":"Basic example",children:[Object(x.jsx)(M.a,{onClick:function(){return a(n)},children:"Update"}),1!==t.role?Object(x.jsx)(M.a,{onClick:function(){return r(n)},variant:"danger",children:"Delete"}):null]})})]})})]})}var ve=n(960),ye=n(958);n(836);function we(e){var t=e.show,n=e.onClose,r=e.onCreate,c=e.tenant,s=e.onUpdate,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],m=b[1],p=Object(a.useState)(""),O=Object(i.a)(p,2),f=O[0],g=O[1],v=Object(a.useState)(""),y=Object(i.a)(v,2),w=y[0],C=y[1],N=Object(a.useState)(null),k=Object(i.a)(N,2),S=k[0],U=k[1];function T(){j(""),m(""),g(""),C(""),U(null)}function B(){T(),n()}return Object(a.useEffect)((function(){c&&(j(c.fullName),m(c.email),g(c.apartment),U(c.img))}),[c]),Object(x.jsxs)(ve.a,{show:t,onHide:B,className:"c-new-tenant",children:[Object(x.jsx)(ve.a.Header,{closeButton:!0,children:Object(x.jsx)(ve.a.Title,{className:"text-center",children:c?"Update Tenant":"New Tenant"})}),Object(x.jsx)(ve.a.Body,{children:Object(x.jsxs)(I.a,{className:"c-tenant-form",children:[Object(x.jsxs)(I.a.Group,{as:pe.a,children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Full Name"}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsx)(I.a.Control,{value:u,placeholder:"First name",onChange:function(e){return j(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicEmail",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Email address: "}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)(I.a.Control,{sm:8,type:"email",placeholder:"Email",value:h,onChange:function(e){return m(e.target.value)}})})]}),c?null:Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicPassword",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Password: "}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsx)(I.a.Control,{type:"password",placeholder:"Password",value:w,onChange:function(e){return C(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicApt",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Apartment: "}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsx)(I.a.Control,{type:"number",placeholder:"Apartment",value:f,onChange:function(e){return g(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formHorizontalImg",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Tenant Image:"}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)(I.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?U(e.target.files[0]):U(null)}})})]}),Object(x.jsx)(ye.a,{src:S?"object"===typeof S?URL.createObjectURL(S):S:""})]})}),Object(x.jsxs)(ve.a.Footer,{children:[Object(x.jsx)(M.a,{variant:"secondary",onClick:B,children:"Close"}),Object(x.jsx)(M.a,{variant:"primary",onClick:function(){c?s(u,h,f,S):r(u,h,f,w,S),T(),n()},children:c?"Update Tenant":"Create Tenant"})]})]})}n(837);function Ce(e){var t=e.show,n=e.onClose,a=e.title,r=e.name,c=e.onDelete;return Object(x.jsxs)(ve.a,{show:t,onHide:n,children:[Object(x.jsx)(ve.a.Header,{closeButton:!0,children:Object(x.jsxs)(ve.a.Title,{children:["Delete ",a]})}),Object(x.jsxs)(ve.a.Body,{children:["Are you sure you want to delete selected ",a.toLowerCase(),": ",r]}),Object(x.jsxs)(ve.a.Footer,{children:[Object(x.jsx)(M.a,{variant:"primary",onClick:n,children:"Close"}),Object(x.jsxs)(M.a,{variant:"danger",onClick:c,children:["Delete ",a]})]})]})}function Ne(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],j=s[1],d=Object(a.useState)(""),h=Object(i.a)(d,2),m=h[0],p=h[1],O=Object(a.useState)(!1),f=Object(i.a)(O,2),g=f[0],v=f[1],C=Object(a.useState)(!1),N=Object(i.a)(C,2),k=N[0],S=N[1],U=Object(a.useState)(!1),T=Object(i.a)(U,2),B=T[0],D=T[1],I=Object(a.useState)(!1),A=Object(i.a)(I,2),E=A[0],P=A[1],V=Object(a.useState)(!1),G=Object(i.a)(V,2),H=G[0],Q=G[1],R=Object(a.useContext)(b);if(Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.getAllCommunityTenants(R.community);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R&&function(){e.apply(this,arguments)}()}),[R]),!R||1!==R.role)return Object(x.jsx)(l.a,{to:"/"});var Y=!0,q=[],z=[],K="",W=new F(R.community);function J(){v(!1),S(!1),j("")}function X(e){K=q[e],j(K),v(!0)}function Z(e){K=q[e],j(K),S(!0)}function $(){return($=Object(w.a)(y.a.mark((function e(t,a,c,s,i){var o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.addTenant(t,a,s,R.community,c,i);case 3:o=e.sent,r(n.concat(o)),D(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),D(!0);case 12:v(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(w.a)(y.a.mark((function e(t,a,c,s){var i,l,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o.fullName&&a===o.email&&c===o.apartment&&s===o.img){e.next=17;break}return e.prev=1,e.next=4,de.updateTenant(o,t,a,c,s);case 4:i=e.sent,l=n.findIndex((function(e){return e.id===o.id})),u=[],n.splice(l,1,i),u=u.concat(n),r(u),P(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),P(!0);case 17:v(!1),j("");case 19:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function ee(){return(ee=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{de.deleteTenant(o),t=n.filter((function(e){return e.id!==o.id})),r(t),Q(!1)}catch(a){console.log(a),Q(!0)}S(!1),j("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n&&n.length>0&&(z=(q=m?n.filter((function(e){return e.fullName.includes(m)||e.email.includes(m)||e.apartment.includes(m)})):q.concat(n)).map((function(e,t){return Object(x.jsx)(ge,{tenant:e,index:t.toString(),onUpdateTenant:X,onDeleteTenant:Z},t)})),Y=!1),Object(x.jsxs)(u.a,{className:"p-tenant",children:[Object(x.jsxs)("h2",{children:["Tenants for building: ",W?W.name:""]}),Object(x.jsx)(xe,{placeholder:"Filter by name/email/apartment:",onFilterChange:function(e){return p(e)},action:"Add Tenant",showModal:function(){return v(!0)}}),B?Object(x.jsx)(L.a,{variant:"danger",children:"Error in adding new tenant. Please try again."}):null,E?Object(x.jsx)(L.a,{variant:"danger",children:"Error in updating a tenant. Please try again."}):null,H?Object(x.jsx)(L.a,{variant:"danger",children:"Error in deleting a tenant. Please try again."}):null,Y?Object(x.jsxs)(M.a,{variant:"primary",disabled:!0,children:[Object(x.jsx)(he.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(x.jsx)("span",{className:"sr-only",children:"Signing..."})]}):Object(x.jsx)(me.a,{children:z.length>0?z:null}),Object(x.jsx)(we,{show:g,onClose:J,onCreate:function(e,t,n,a,r){return $.apply(this,arguments)},tenant:o,onUpdate:function(e,t,n,a){return _.apply(this,arguments)}}),Object(x.jsx)(Ce,{show:k,onClose:J,title:"Tenant",name:o.fullName,onDelete:function(){return ee.apply(this,arguments)}})]})}var ke=function e(t,n,a){Object(P.a)(this,e),this.time=t,this.text=n,this.user=a},Se=(n(838),n(429));function Ue(e){var t=e.message,n=e.index,r=e.onUpdateMessage,c=e.onDeleteMessage,s=e.onNewCommentCreate,o=e.onReadMessage,l=Object(a.useContext)(b),u=Object(a.useState)(""),j=Object(i.a)(u,2),d=j[0],h=j[1],m=Object(a.useState)(!1),O=Object(i.a)(m,2),f=O[0],g=O[1];Object(a.useEffect)((function(){t&&t.readBy&&t.readBy.includes(l.id)&&g(!0)}),[t]);var v=[];function y(e){e.preventDefault();var t=new ke(new Date,d,l);s(t,n)}return t.comments&&t.comments.length>0&&(v=t.comments.map((function(e){var t=function(e){var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear(),r=e.getHours(),c=("0"+e.getMinutes()).slice(-2);return n+"/"+t+"/"+a+" "+r+":"+c}(e.time);return Object(x.jsxs)(k.a,{className:"c-comment",children:[Object(x.jsx)("div",{children:Object(x.jsx)(k.a.Img,{variant:"top",src:e.user.img})}),Object(x.jsxs)(k.a.Body,{children:[Object(x.jsxs)(k.a.Title,{children:[e.user.fullName,":",Object(x.jsx)(k.a.Text,{style:{display:"inline",fontSize:"1rem"},children:" ".concat(t)})]}),Object(x.jsx)(k.a.Text,{children:e.text})]})]})}))),Object(x.jsxs)(k.a,{className:"c-message",children:[Object(x.jsx)(k.a.Header,{children:Object(x.jsx)(me.a.Toggle,{as:M.a,variant:"link",eventKey:n,onClick:function(){g(!0),o(n)},children:Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(Oe.a,{md:1,children:f?Object(x.jsx)(p.d,{}):Object(x.jsx)(p.e,{})}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)("h5",{children:t.title})})]})})}),Object(x.jsx)(me.a.Collapse,{eventKey:n,children:Object(x.jsxs)(pe.a,{className:"c-message-info",children:[t.img?Object(x.jsx)(Oe.a,{md:2,className:"c-message-img",children:Object(x.jsx)(k.a.Img,{variant:"top",src:t.img})}):null,Object(x.jsx)(Oe.a,{md:4,children:Object(x.jsxs)(k.a.Body,{className:"c-message-details",children:[Object(x.jsx)(k.a.Title,{children:t.title}),Object(x.jsx)(k.a.Text,{children:t.details}),Object(x.jsxs)(k.a.Text,{children:["Priority: ",t.priority]})]})}),Object(x.jsxs)(Oe.a,{md:4,className:"c-message-comments",children:[Object(x.jsx)("h5",{children:"Comments:"}),v&&v.length>0?v:null,Object(x.jsx)(I.a,{onSubmit:y,children:Object(x.jsxs)("div",{className:"c-comment-input",children:[Object(x.jsx)(I.a.Control,{placeholder:"Comment",rows:2,value:d,onChange:function(e){return h(e.target.value)}}),Object(x.jsx)(M.a,{className:"c-comment-submit",onClick:y,children:Object(x.jsx)(Se.a,{})})]})})]}),1===l.role?Object(x.jsx)("div",{className:"c-message-button",children:Object(x.jsxs)(fe.a,{className:"mr-2","aria-label":"Basic example",children:[Object(x.jsx)(M.a,{onClick:function(){return r(n)},children:"Update"}),Object(x.jsx)(M.a,{onClick:function(){return c(n)},variant:"danger",children:"Delete"})]})}):null]})})]})}function Te(e){var t=e.show,n=e.onClose,r=e.onCreate,c=e.message,s=e.onUpdate,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],m=b[1],p=Object(a.useState)("Info"),O=Object(i.a)(p,2),f=O[0],g=O[1],v=Object(a.useState)(null),y=Object(i.a)(v,2),w=y[0],C=y[1];function N(){j(""),m(""),g(""),C(null),n()}return Object(a.useEffect)((function(){c&&(j(c.title),m(c.details),g(c.priority),C(c.img))}),[c]),Object(x.jsxs)(ve.a,{show:t,onHide:N,className:"c-new-tenant",children:[Object(x.jsx)(ve.a.Header,{closeButton:!0,children:Object(x.jsx)(ve.a.Title,{className:"text-center",children:c?"Update Message":"New Message"})}),Object(x.jsx)(ve.a.Body,{children:Object(x.jsxs)(I.a,{className:"c-message-form",children:[Object(x.jsxs)(I.a.Group,{as:pe.a,children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Message Title"}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsx)(I.a.Control,{value:u,placeholder:"Title",onChange:function(e){return j(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicDetail",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Details: "}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)(I.a.Control,{sm:8,as:"textarea",placeholder:"Details",rows:3,value:h,onChange:function(e){return m(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicPriority",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Priority: "}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsxs)(I.a.Control,{as:"select",placeholder:"Priority",value:f,onChange:function(e){return g(e.target.value)},children:[Object(x.jsx)("option",{children:"Info"}),Object(x.jsx)("option",{children:"Important"})]})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formHorizontalImg",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"Message Image:"}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)(I.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?C(e.target.files[0]):C(null)}})})]}),Object(x.jsx)(ye.a,{src:w?"object"===typeof w?URL.createObjectURL(w):w:""})]})}),Object(x.jsxs)(ve.a.Footer,{children:[Object(x.jsx)(M.a,{variant:"secondary",onClick:N,children:"Close"}),Object(x.jsx)(M.a,{variant:"primary",onClick:function(){c?s(u,h,f,w):r(u,h,f,w),N()},children:c?"Update Message":"Create Message"})]})]})}n(839);function Be(){var e=Object(a.useContext)(b),t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(i.a)(s,2),j=o[0],d=o[1],h=Object(a.useState)(!1),m=Object(i.a)(h,2),p=m[0],O=m[1],f=Object(a.useState)(!1),g=Object(i.a)(f,2),v=g[0],C=g[1],N=Object(a.useState)(!1),k=Object(i.a)(N,2),S=k[0],U=k[1],T=Object(a.useState)(!1),B=Object(i.a)(T,2),D=B[0],I=B[1],A=Object(a.useState)(null),E=Object(i.a)(A,2),P=E[0],V=E[1],G=Object(a.useState)(""),H=Object(i.a)(G,2),Q=H[0],R=H[1],Y=Object(a.useState)(""),q=Object(i.a)(Y,2),z=q[0],K=q[1],W=Object(a.useState)(""),J=Object(i.a)(W,2),X=J[0],Z=J[1],$=Object(a.useState)(null),_=Object(i.a)($,2),ee=_[0],te=_[1];if(Object(a.useEffect)((function(){function t(){return(t=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.getAllCommunityMessages(e.community);case 2:n=t.sent,V(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),!e)return Object(x.jsx)(l.a,{to:"/"});var ne=!0,ae=new F(e.community),re=[],ce=[];function se(){c(!1),d(!1)}function ie(e){var t=re[e];te(t),c(!0)}function oe(e){var t=re[e];te(t),d(!0)}function le(){return(le=Object(w.a)(y.a.mark((function e(t,n,a,r){var s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.addNewMessage(t,n,a,r);case 3:s=e.sent,V(P.concat(s)),O(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),O(!0);case 12:c(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ue(e,t){return je.apply(this,arguments)}function je(){return(je=Object(w.a)(y.a.mark((function e(t,n){var a,r,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=re[n],e.next=4,de.addNewComment(a,t);case 4:r=e.sent,c=P.findIndex((function(e){return e.id===a.id})),s=[],P.splice(c,1,r),s=s.concat(P),V(s),C(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),C(!0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function be(){return(be=Object(w.a)(y.a.mark((function e(t,n,a,r){var s,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===ee.title&&n===ee.details&&a===ee.priority&&r===ee.img){e.next=17;break}return e.prev=1,e.next=4,de.updateMessage(ee,t,n,a,r);case 4:s=e.sent,i=P.findIndex((function(e){return e.id===ee.id})),o=[],P.splice(i,1,s),o=o.concat(P),V(o),U(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),U(!0);case 17:c(!1),te("");case 19:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function pe(){return(pe=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{de.deleteMessage(ee),t=P.filter((function(e){return e.id!==ee.id})),V(t),I(!1)}catch(n){console.log(n),I(!0)}d(!1),te("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(w.a)(y.a.mark((function t(n){var a,r,c,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=re[n],t.next=3,de.addUserReadMessage(a,e.id);case 3:r=t.sent,c=P.findIndex((function(e){return e.id===a.id})),s=[],P.splice(c,1,r),s=s.concat(P),V(s);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return P&&P.length>0?(re=re.concat(P),Q&&(re=re.filter((function(e){return e.title.includes(Q)||e.details.includes(Q)}))),z&&"filter by priority:"!==z&&(re=re.filter((function(e){return e.priority===z}))),X&&re.sort((function(e,t){switch(X){case"Date":return t.creatDate>e.createDate;case"Priority":return e.priority>t.priority;default:return-1}})),ce=re.map((function(t,n){return Object(x.jsx)(Ue,{message:t,index:n.toString(),activeUser:e,onUpdateMessage:ie,onDeleteMessage:oe,onNewCommentCreate:ue,onReadMessage:Oe},n)})),ne=!1):ne=!1,Object(x.jsxs)(u.a,{className:"p-messages",children:[Object(x.jsxs)("h2",{children:["Messages for building: ",ae?ae.name:"","  "]}),Object(x.jsx)(xe,{placeholder:"Filter by Text in Title or Details",filterSelection:["filter by priority:","Info","Important"],sortBy:["Date","Priority"],onSortChange:function(e){return Z(e)},onFilterChange:function(e){return R(e)},onFilterSelectChange:function(e){return K(e)},action:1===e.role?"New Message":"",showModal:function(){return c(!0)}}),p?Object(x.jsx)(L.a,{variant:"danger",children:"Error in adding new Message. Please try again."}):null,v?Object(x.jsx)(L.a,{variant:"danger",children:"Error in adding new comment. Please try again."}):null,S?Object(x.jsx)(L.a,{variant:"danger",children:"Error in updating the selected message. Please try again."}):null,D?Object(x.jsx)(L.a,{variant:"danger",children:"Error in deleting the selected message. Please try again."}):null,ne?Object(x.jsxs)(M.a,{variant:"primary",disabled:!0,children:[Object(x.jsx)(he.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(x.jsx)("span",{className:"sr-only",children:"Signing..."})]}):Object(x.jsx)(me.a,{children:ce&&ce.length>0?ce:null}),Object(x.jsx)(Te,{show:r,onClose:se,onCreate:function(e,t,n,a){return le.apply(this,arguments)},message:ee,onUpdate:function(e,t,n,a){return be.apply(this,arguments)}}),Object(x.jsx)(Ce,{show:j,onClose:se,title:"Message",name:ee?ee.title:null,onDelete:function(){return pe.apply(this,arguments)}})]})}function De(){return Object(x.jsx)(u.a,{children:Object(x.jsx)("img",{src:"https://i.stack.imgur.com/6M513.png",style:{width:"100%"},alt:"Not Found"})})}n(840);function Le(e){var t=e.onLogin,n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),j=Object(i.a)(o,2),d=j[0],h=j[1],m=Object(a.useState)(""),O=Object(i.a)(m,2),f=O[0],g=O[1],v=Object(a.useState)(""),C=Object(i.a)(v,2),N=C[0],k=C[1],S=Object(a.useState)(""),U=Object(i.a)(S,2),T=U[0],B=U[1],D=Object(a.useState)(null),A=Object(i.a)(D,2),E=A[0],P=A[1],F=Object(a.useState)(""),V=Object(i.a)(F,2),G=V[0],H=V[1],Q=Object(a.useState)(""),R=Object(i.a)(Q,2),Y=R[0],q=R[1],z=Object(a.useState)(""),K=Object(i.a)(z,2),W=K[0],J=K[1],X=Object(a.useState)(""),Z=Object(i.a)(X,2),$=Z[0],_=Z[1],ee=Object(a.useState)(!1),te=Object(i.a)(ee,2),ne=te[0],ae=te[1];if(Object(a.useContext)(b))return Object(x.jsx)(l.a,{to:"/"});function re(){return(re=Object(w.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),ae(!0),a=null,!(f&&N&&T&&G&&Y&&$)){e.next=20;break}return s(!1),e.prev=5,e.next=8,de.signup(f,N,T,G,Y,W,$,E);case 8:a=e.sent,t(a),h(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("Error while logging in user",e.t0),h(!0),ae(!1);case 18:e.next=22;break;case 20:s(!0),ae(!1);case 22:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}return Object(x.jsx)("div",{className:"p-signup",children:Object(x.jsxs)(u.a,{fluid:!0,className:"p-signup-form col-md-7 col-sm-3",children:[Object(x.jsx)("h4",{children:"Create a Committee Member Account"}),Object(x.jsx)("p",{children:"Please fill in all the follwoing details:"}),c?Object(x.jsx)(L.a,{variant:"danger",children:"Missing information! Fill in all details."}):null,d?Object(x.jsx)(L.a,{variant:"danger",children:"Error in Sign Up!"}):null,ne?Object(x.jsxs)(M.a,{variant:"primary",disabled:!0,children:[Object(x.jsx)(he.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(x.jsx)("span",{className:"sr-only",children:"Signing..."})]}):Object(x.jsxs)(I.a,{onSubmit:function(e){return re.apply(this,arguments)},children:[Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(x.jsx)(I.a.Label,{children:"Enter name: "}),Object(x.jsx)(I.a.Control,{type:"text",value:f,placeholder:"Full Name",onChange:function(e){return g(e.target.value)}})]}),Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(x.jsx)(I.a.Label,{children:"Email address: "}),Object(x.jsx)(I.a.Control,{type:"email",placeholder:"Email",value:N,onChange:function(e){return k(e.target.value)}}),Object(x.jsx)(I.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(x.jsx)(I.a.Label,{children:"Password: "}),Object(x.jsx)(I.a.Control,{type:"password",placeholder:"Password",value:T,onChange:function(e){return B(e.target.value)}})]}),Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicBuilding",children:[Object(x.jsx)(I.a.Label,{children:"Building/Conmmunity Name"}),Object(x.jsx)(I.a.Control,{type:"text",value:G,onChange:function(e){return H(e.target.value)},placeholder:"Building/Community name"})]}),Object(x.jsxs)(pe.a,{className:"mb-3",children:[Object(x.jsxs)(Oe.a,{sm:6,children:[Object(x.jsx)(I.a.Label,{children:"Address: "}),Object(x.jsx)(I.a.Control,{type:"text",placeholder:"Address",value:Y,onChange:function(e){return q(e.target.value)}})]}),Object(x.jsxs)(Oe.a,{sm:6,children:[Object(x.jsx)(I.a.Label,{children:"Apartment: "}),Object(x.jsx)(I.a.Control,{type:"number",placeholder:"Apartment",value:W,onChange:function(e){return J(e.target.value)}})]})]}),Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formBasicCity",children:[Object(x.jsx)(I.a.Label,{children:"City: "}),Object(x.jsx)(I.a.Control,{type:"text",placeholder:"City",value:$,onChange:function(e){return _(e.target.value)}})]}),Object(x.jsxs)(I.a.Group,{className:"mb-3",controlId:"formHorizontalImg",children:[Object(x.jsx)(I.a.Label,{children:"Tenant Image:"}),Object(x.jsx)(I.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?P(e.target.files[0]):P(null)}})]}),Object(x.jsx)(ye.a,{src:E?URL.createObjectURL(E):""}),Object(x.jsxs)(M.a,{className:"mb-3",variant:"success",type:"submit",block:!0,children:["Signup",Object(x.jsx)(p.a,{})]})]})]})})}n(841);var Ie=n(24),Me=n(23),Ae=n(433);n(947);function Ee(e){var t,n=e.voting,r=e.index,c=e.communityUsers,s=e.onUpdateDate,o=e.onUserVote,l=e.disable,u=Object(a.useContext)(b),j=Object(a.useState)(""),d=Object(i.a)(j,2),h=d[0],m=d[1],p=function(e){var t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear();return n+"/"+t+"/"+a}(n.dueDate),O=[],f="",g=null;if(n.votes&&n.votes.length>0){var v,y=Object(Me.a)(n.options);try{var w=function(){var e=v.value;if(n.votes&&n.votes.length>0){var t=n.votes.filter((function(t){return t.vote===e}));O=[].concat(Object(Ie.a)(O),[{option:e,count:t.length}])}};for(y.s();!(v=y.n()).done;)w()}catch(S){y.e(S)}finally{y.f()}var C=n.votes.find((function(e){return e.user.id===u.id}));C&&(f=C.vote);var N=O.map((function(e){return e.count})).reduce((function(e,t){return e+t}));c.length-N>0&&(O=[].concat(Object(Ie.a)(O),[{option:"not voted yet",count:c.length-N}])),g={labels:O.map((function(e){return e.option})),datasets:[{label:"# of Votes",data:O.map((function(e){return e.count})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"].slice(0,O.length),borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"].slice(0,O.length),borderWidth:1}]}}return n.votes&&n.votes.length,t=n.options.map((function(e){return Object(x.jsx)(I.a.Check,{name:"option",type:"radio",label:e,value:e,onChange:function(e){return m(e.target.value)}})})),Object(x.jsxs)(k.a,{className:"c-voting",children:[Object(x.jsx)(k.a.Header,{children:Object(x.jsx)(me.a.Toggle,{as:M.a,variant:"link",eventKey:r,children:Object(x.jsx)("h5",{children:n.title})})}),Object(x.jsx)(me.a.Collapse,{eventKey:r,children:Object(x.jsx)("div",{className:"p-voting-info",children:Object(x.jsxs)(k.a.Body,{className:"p-voting-card",children:[Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(Oe.a,{md:2,children:Object(x.jsx)("h6",{children:"Details:"})}),Object(x.jsx)(Oe.a,{md:7,children:Object(x.jsx)(k.a.Text,{children:n.details})})]}),Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(Oe.a,{md:2,children:Object(x.jsx)("h6",{children:"Options:"})}),Object(x.jsx)(Oe.a,{md:4,children:Object(x.jsx)(I.a,{children:t})}),Object(x.jsxs)(Oe.a,{md:4,children:[l?null:Object(x.jsx)(M.a,{onClick:function(){o(r,h)},children:"Vote"}),f?Object(x.jsxs)(k.a.Text,{children:["You Chose: ",f]}):null]})]}),Object(x.jsxs)(pe.a,{children:[Object(x.jsx)(Oe.a,{md:2,children:Object(x.jsx)("h6",{children:"End Date:"})}),Object(x.jsx)(Oe.a,{md:4,children:Object(x.jsx)(k.a.Text,{children:p})}),Object(x.jsx)(Oe.a,{md:4,children:1!==u.role||l?null:Object(x.jsx)(M.a,{onClick:function(){return s(r)},children:"Update End Date"})})]}),g?Object(x.jsx)(Oe.a,{md:6,children:Object(x.jsx)(Ae.a,{data:g})}):null]})})})]})}var Pe=n(432);function Fe(e){var t=e.show,n=e.onClose,r=e.onCreate,c=e.voting,s=e.onUpdate,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),h=b[0],m=b[1],p=Object(a.useState)([]),O=Object(i.a)(p,2),f=O[0],g=O[1],v=Object(a.useState)(null),y=Object(i.a)(v,2),w=y[0],C=y[1],N=Object(a.useState)([{option:""}]),k=Object(i.a)(N,2),S=k[0],U=k[1];function T(){B(),n()}function B(){j(""),m(""),g([]),C(null)}function D(){U([].concat(Object(Ie.a)(S),[{option:""}]))}return Object(x.jsxs)(ve.a,{show:t,onHide:T,className:"c-new-voting",children:[Object(x.jsx)(ve.a.Header,{closeButton:!0,children:Object(x.jsx)(ve.a.Title,{className:"text-center",children:c?"Update Voting":"New Voting"})}),Object(x.jsx)(ve.a.Body,{children:Object(x.jsxs)(I.a,{className:"c-voting-form",children:[c?null:Object(x.jsxs)("div",{children:[Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicTitle",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:3,children:"Title"}),Object(x.jsx)(Oe.a,{sm:9,children:Object(x.jsx)(I.a.Control,{value:u,placeholder:"Title",onChange:function(e){return j(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicDetails",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:3,children:"Details "}),Object(x.jsx)(Oe.a,{children:Object(x.jsx)(I.a.Control,{sm:9,as:"textarea",placeholder:"Details",value:h,onChange:function(e){return m(e.target.value)}})})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicOptions",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:3,children:"Options: "}),Object(x.jsx)(Oe.a,{sm:9,children:S.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(I.a.Control,{name:"option",value:e.option,onChange:function(e){return function(e,t){var n=Object(Ie.a)(S);n[t].option=e,U(n),g(n.map((function(e){return e.option})))}(e.target.value,t)}}),1!==S.length&&Object(x.jsx)(M.a,{variant:"outline-danger",onClick:function(){return function(e){var t=Object(Ie.a)(S);t.splice(e,1),U(t)}(t)},children:"Remove"}),S.length-1===t&&Object(x.jsxs)(M.a,{variant:"outline-primary",onClick:D,children:[Object(x.jsx)(Pe.a,{}),"Add"]})]})}))})]})]}),Object(x.jsxs)(I.a.Group,{as:pe.a,controlId:"formBasicEndDate",children:[Object(x.jsx)(I.a.Label,{column:!0,sm:4,children:"End Date: "}),Object(x.jsx)(Oe.a,{sm:8,children:Object(x.jsx)(I.a.Control,{type:"date",value:w,onChange:function(e){return C(e.target.value)}})})]})]})}),Object(x.jsxs)(ve.a.Footer,{children:[Object(x.jsx)(M.a,{variant:"secondary",onClick:T,children:"Close"}),Object(x.jsx)(M.a,{variant:"primary",onClick:function(){c?s(new Date(w)):r(u,h,f,new Date(w)),B(),n()},children:c?"Update Voting":"Create Voting"})]})]})}var Ve=n(277);function Ge(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),o=s[0],j=s[1],d=Object(a.useState)(!1),h=Object(i.a)(d,2),m=h[0],p=h[1],O=Object(a.useState)(!1),f=Object(i.a)(O,2),g=f[0],v=f[1],C=Object(a.useState)(!1),N=Object(i.a)(C,2),k=N[0],S=N[1],U=Object(a.useState)(""),T=Object(i.a)(U,2),B=T[0],D=T[1],L=Object(a.useState)(""),I=Object(i.a)(L,2),A=I[0],E=I[1],P=Object(a.useContext)(b);if(Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.getAllCommunityVoting(P.community);case 2:return t=e.sent,e.next=5,de.getCommunityUsers(P.community);case 5:return n=e.sent,e.next=8,de.getCommunityName(P.community);case 8:a=e.sent,j(n),r(t),E(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}P&&function(){e.apply(this,arguments)}()}),[P]),!P)return Object(x.jsx)(l.a,{to:"/"});var F=!0,V=[],G=[],H=[],Q=[];function R(){return(R=Object(w.a)(y.a.mark((function e(t,a,c,s){var i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.addVoting(t,a,c,s,P);case 3:i=e.sent,r(n.concat(i)),v(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),v(!0);case 12:p(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Y(e){var t=V[e];D(t),p(!0)}function q(){return(q=Object(w.a)(y.a.mark((function e(t){var a,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}return e.prev=1,e.next=4,de.changeVotingDate(B,t);case 4:a=e.sent,c=n.findIndex((function(e){return e.id===B.id})),s=[],n.splice(c,1,a),s=s.concat(n),r(s),S(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),S(!0);case 17:p(!1),D("");case 19:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function z(e,t){return K.apply(this,arguments)}function K(){return(K=Object(w.a)(y.a.mark((function e(t,a){var c,s,i,o,l,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}if(!((c=V[t]).votes&&c.votes.length>0)){e.next=6;break}if(!(s=c.votes.find((function(e){return e.user.id===P.id})))||s.vote!==a){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,i={user:P,vote:a},e.next=10,de.addUserVoting(c,i);case 10:o=e.sent,l=n.findIndex((function(e){return e.id===c.id})),u=[],n.splice(l,1,o),u=u.concat(n),r(u),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})))).apply(this,arguments)}return n&&n.length>0?((V=n.filter((function(e){return e.dueDate>new Date}))).length>0&&(H=V.map((function(e,t){return Object(x.jsx)(Ee,{voting:e,index:t.toString(),communityUsers:o,onUpdateDate:Y,onUserVote:z})}))),(G=n.filter((function(e){return e.dueDate<=new Date}))).length>0&&(Q=G.map((function(e,t){return Object(x.jsx)(Ee,{voting:e,index:t.toString(),communityUsers:o,disable:!0})}))),F=!1):F=!1,Object(x.jsxs)(u.a,{className:"p-voting",children:[Object(x.jsxs)("h2",{children:["Voting for building: ",A]}),Object(x.jsx)(xe,{action:1===P.role?"New Voting":"",showModal:function(){return p(!0)}}),g?Object(x.jsx)(Ve.Alert,{variant:"danger",children:"Error in adding new voting. Please try again."}):null,k?Object(x.jsx)(Ve.Alert,{variant:"danger",children:"Error in changing the voting date. Please try again."}):null,F?Object(x.jsxs)(M.a,{variant:"primary",disabled:!0,children:[Object(x.jsx)(he.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(x.jsx)("span",{className:"sr-only",children:"Signing..."})]}):Object(x.jsxs)("div",{className:"p-voting-info",children:[H.length>0?Object(x.jsxs)("div",{style:{width:"50%"},children:[Object(x.jsx)("h3",{children:"Active Voting"}),Object(x.jsx)(me.a,{children:H})]}):null,Q.length>0?Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"Voting Results"}),Object(x.jsx)(me.a,{children:Q})]}):null]}),Object(x.jsx)(Fe,{show:m,onClose:function(){p(!1)},onCreate:function(e,t,n,a){return R.apply(this,arguments)},voting:B,onUpdate:function(e){return q.apply(this,arguments)}})]})}var He=function(){var e=Object(a.useState)(de.loadActiveUser()),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(x.jsx)(b.Provider,{value:n,children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(o.a,{children:[Object(x.jsx)(f,{onLogout:function(){r(null),localStorage.clear()}}),Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/",children:Object(x.jsx)(be,{onLogin:function(e){return r(e)}})}),Object(x.jsx)(l.b,{exact:!0,path:"/tenants",children:Object(x.jsx)(Ne,{})}),Object(x.jsx)(l.b,{exact:!0,path:"/signup",children:Object(x.jsx)(Le,{onLogin:function(e){return r(e)}})}),Object(x.jsx)(l.b,{exact:!0,path:"/dashboard",children:Object(x.jsx)(g,{})}),Object(x.jsx)(l.b,{exact:!0,path:"/messages",children:Object(x.jsx)(Be,{})}),Object(x.jsx)(l.b,{exact:!0,path:"/voting",children:Object(x.jsx)(Ge,{})}),Object(x.jsx)(l.b,{path:"/",children:Object(x.jsx)(De,{})})]})]})})})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,966)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};E.a.serverURL="https://parseapi.back4app.com",E.a.initialize("7DF9hNM7Lg0czEM0MSXeIyFeVLJjcQ6vLyHRylhg","bpB5hgraIysLbHEirYG55VLia5gcfaVZIt5aVkRg"),s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(He,{})}),document.getElementById("root")),Qe()}},[[950,1,2]]]);
//# sourceMappingURL=main.0ef484c8.chunk.js.map